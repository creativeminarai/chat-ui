---
description: お店の情報からチャット文言を作成するワークフロー
---

# WORKFLOW: WRITING PROMPT GENERATION

このワークフローは、お店の情報・メニュー一覧・伝えたいことなどの入力データから、お客様に向けたチャットの文言をAIが生成するための手順です。

## ステップ 1: ユーザー入力の収集

まず、ユーザーから以下の情報を収集します。

### 必須入力項目
- **店舗基本情報**: 店名、業種、場所、雰囲気
- **メニュー・商品情報**: メニュー一覧、おすすめ商品、価格帯
- **伝えたいこと**: 店主の想い、こだわり、強み、特徴

### オプション入力項目
- **ターゲット層**: メインのお客様（年齢層、属性）
- **シーン**: 利用シーン（デート、家族、一人など）
- **制約事項**: 避けたい表現、必ず入れるべき文言

### ステップ1完了時のアクション
タスク管理アプリのステータスを `In Progress` に更新

---

## ステップ 2: ゴールの定義

チャットの目的（最終ゴール）を明確にします。

### ゴールの種類
| ゴール | 説明 | アプローチ |
|--------|------|------------|
| **来店促進** | お店に来てもらう | 雰囲気・アクセス・営業時間を自然に伝える |
| **予約促進** | 予約を取ってもらう | 予約の必要性・空き状況・特典を伝える |
| **メニュー注文** | 商品を注文してもらう | 商品の魅力・こだわり・おすすめを伝える |
| **ファン獲得** | リピーターになってもらう | 店主の想い・ストーリー・こだわりを深く伝える |
| **情報発信** | SNS等での拡散 | シェアしたくなるようなエピソードを含める |

### ゴール設定のポイント
- ユーザーに「最終的にどうしてほしいか」を明確にする
- ゴールによって文言のトーンや構成が変わる

---

## ステップ 3: スタンス・口調の選択

チャットのキャラクター性を決定します。

### スタンスの種類

#### A. フレンドリー（カジュアル）
```
特徴: 親しみやすい、砕けた表現、絵文字使用可
口調例: 「こんにちは！」「〜だよね」「〜だよ！」
適用: カフェ、居酒屋、若者向け店舗
```

#### B. 格式丁寧（フォーマル）
```
特徴: 丁寧語・敬語、礼儀正しい、落ち着いた印象
口調例: 「いらっしゃいませ」「〜でございます」「〜でしょうか」
適用: 高級店、老舗、プロフェッショナルなサービス業
```

#### C. 温かみのある（親しみ＋丁寧）
```
特徴: 丁寧だが温かみ、おもてなし精神
口調例: 「ようこそお越しくださいました」「〜ですね」「〜ですよ」
適用: 家庭料理、食堂、地域に根ざした店
```

#### D. プロフェッショナル（専門的）
```
特徴: 知識豊富、説明的、信頼感重視
口調例: 「〜という特徴がございます」「〜しております」
適用: 専門店、技術を提供する店
```

#### E. 個性的・キャラクター重視
```
特徴: 独特の言い回し、キャラ設定
口調例: 店主のキャラに合わせた独自の表現
適用: コンセプトの強い店、テーマパーク風
```

### 複数パターン生成
ユーザーが複数のスタンスを希望する場合、それぞれのスタンスでチャットを生成する。

---

## ステップ 4: チャットシナリオの生成

収集した情報・ゴール・スタンスをもとに、チャットシナリオを生成します。

### チャット構成テンプレート

#### 基本構成
```
1. 挨拶・導入（オープニング）
   - 店の雰囲気を感じさせる挨拶
   - ユーザーの興味を引くフック

2. 本論・ストーリー
   - 店主の想い・こだわり
   - お店の特徴・強み
   - メニューの紹介

3. Q&A・対話
   - よくある質問への回答
   - ユーザーの疑問に対応する情報

4. 結び・アクション
   - ゴールに合わせた行動喚起
   - 来店・予約・注文の促し
```

#### シナリオ生成のポイント
- **1メッセージあたりの長さ**: 短すぎず長すぎず（約60-120文字）
- **改行のタイミング**: 情報の区切りで改行
- **感情の動き**: 挨拶→興味→理解→行動、という流れを作る
- **選択肢の提示**: ユーザーが選べるようにする

---

## ステップ 5: 確認と調整

生成したチャットシナリオを確認し、必要に応じて調整します。

### 確認チェックリスト
- [ ] ゴールに対して適切な内容になっているか
- [ ] 選択したスタンスの口調で統一されているか
- [ ] 伝えたいことが全て含まれているか
- [ ] 自然な会話の流れになっているか
- [ ] 情報過多になっていないか

### 調整オプション
- 文言の微調整
- 構成の入れ替え
- 長さの調整
- スタンスの変更

---

## ステップ 6: 出力

完成したチャットシナリオを出力します。

### 出力形式
選択可能な出力形式：

1. **チャットデータ形式（`chat-data.js`形式）**
   ```javascript
   {
     "start": { text: "...", options: [...] },
     "about": { text: "...", options: [...] },
     ...
   }
   ```

2. **テキスト形式**
   - 読みやすいテキスト形式での出力
   - セクションごとの区切り

3. **プレビュー形式**
   - チャットUIでのプレビュー画像生成
   - 実際の見た目を確認可能

### ステップ6完了時のアクション
タスク管理アプリのステータスを `Done` に更新

---

## 📝 入力フォームの例

ユーザーに入力してもらう情報の例：

```
【店舗基本情報】
店名: 森のピザ屋
業種: ピザ屋
場所: 森の中
雰囲気: 秘密的、あたたかい

【メニュー情報】
おすすめ: 魔法のはちみつチーズピザ
価格帯: 1,500〜2,500円
その他: 厚切りベーコンの燻製ピザ、森の恵みマルゲリータ

【伝えたいこと】
- 石窯で焼く本格ピザ
- 魔法の隠し味（噂）
- 森で採れた素材

【ゴール】
来店してもらうこと

【スタンス】
フレンドリー（親しみやすい）
```

---

## 🎯 出力例（フレンドリー版）

```
【挨拶】
いらっしゃいませ！「森のピザ屋」へようこそ〜！
店主の私になんでも聞いてくださいね。

【ストーリー】
ここは森の中にある小さなピザ屋なんです。
石窯で焼く本格的なピザが自慢でして...
魔法の隠し味が効いているという噂もありますよ🍕✨

【メニュー紹介】
おすすめは「魔法のはちみつチーズピザ」！
4種類のチーズに、森で採れた特製はちみつをかけて食べるんです。
甘じょっぱさがクセになりますよ！

【結び】
美味しいピザが焼き上がるまで、
森の空気を楽しんでお待ちくださいね！
また遊びに来てくださいね〜♪
```

---

## 🔧 関連ファイル

- `references/prompts.md`: 画像生成プロンプト戦略
- `references/chat-data.js`: チャットデータ形式の参考
- `.agent/workflows/reference-chat-gen.md`: チャットページ生成ワークフロー
